<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5ë‹¨ê³„ í´ë°± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 40px;
        }
        .test-section {
            margin: 30px 0;
            padding: 25px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: #f9f9f9;
        }
        h2 {
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 15px;
        }
        .tier-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            margin-right: 10px;
        }
        .result {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            min-height: 50px;
        }
        .original {
            color: #333;
            margin-bottom: 10px;
            font-weight: 500;
        }
        .pronunciation {
            color: #667eea;
            font-weight: 600;
            font-size: 1.1em;
        }
        .info {
            color: #666;
            font-size: 0.9em;
            margin-top: 10px;
            font-style: italic;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .system-info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .system-info h3 {
            color: #1976d2;
            margin-top: 0;
        }
        .tier-list {
            list-style: none;
            padding: 0;
        }
        .tier-list li {
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
        }
        .tier-list li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸµ 5ë‹¨ê³„ í´ë°± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</h1>

        <div class="system-info">
            <h3>ğŸ’¡ ì‹œìŠ¤í…œ êµ¬ì¡°</h3>
            <ol class="tier-list">
                <li><span class="tier-badge">1ë‹¨ê³„</span> ë‹¨ì–´ ì‚¬ì „ (1000+ ë‹¨ì–´) - ì¦‰ì‹œ ì‘ë‹µ</li>
                <li><span class="tier-badge">2ë‹¨ê³„</span> LocalStorage ìºì‹œ - ì´ì „ ì¡°íšŒ ê²°ê³¼</li>
                <li><span class="tier-badge">3ë‹¨ê³„</span> Python API (í¬íŠ¸ 5001) - ê·œì¹™ ê¸°ë°˜ ê³ ê¸‰ ë³€í™˜</li>
                <li><span class="tier-badge">4ë‹¨ê³„</span> Dictionary API - IPA ë³€í™˜</li>
                <li><span class="tier-badge">5ë‹¨ê³„</span> JavaScript ê·œì¹™ - ìµœí›„ì˜ í´ë°±</li>
            </ol>
        </div>

        <div class="test-section">
            <h2><span class="tier-badge">1ë‹¨ê³„</span> ì‚¬ì „ ê¸°ë°˜ í…ŒìŠ¤íŠ¸</h2>
            <button onclick="testDictionary()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="dictionaryResult" class="result"></div>
        </div>

        <div class="test-section">
            <h2><span class="tier-badge">3ë‹¨ê³„</span> Python API í…ŒìŠ¤íŠ¸</h2>
            <button onclick="testPythonAPI()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="pythonResult" class="result"></div>
        </div>

        <div class="test-section">
            <h2><span class="tier-badge">ì „ì²´</span> ì‹¤ì œ ê°€ì‚¬ í…ŒìŠ¤íŠ¸</h2>
            <button onclick="testFullSentence()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="sentenceResult" class="result"></div>
        </div>

        <div class="test-section">
            <h2>âš¡ ìºì‹± ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</h2>
            <button onclick="testCache()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="cacheResult" class="result"></div>
        </div>
    </div>

    <script src="js/converter.js"></script>
    <script>
        async function testDictionary() {
            const testWords = "Tell me why it's so uncomfortable";
            const result = document.getElementById('dictionaryResult');
            result.innerHTML = '<p class="original">ì›ë¬¸: ' + testWords + '</p><p>ë³€í™˜ ì¤‘...</p>';

            const start = Date.now();
            const pronunciation = await convertLineAsync(testWords);
            const time = Date.now() - start;

            result.innerHTML = `
                <p class="original">ì›ë¬¸: ${testWords}</p>
                <p class="pronunciation">ë°œìŒ: ${pronunciation}</p>
                <p class="info">ì†Œìš” ì‹œê°„: ${time}ms (ì‚¬ì „ ë‹¨ì–´ëŠ” ì¦‰ì‹œ ë°˜í™˜)</p>
            `;
        }

        async function testPythonAPI() {
            // Python APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì‚¬ì „ì— ì—†ëŠ” ë‹¨ì–´ ì‚¬ìš©
            const testWords = "serendipity magnificent";
            const result = document.getElementById('pythonResult');
            result.innerHTML = '<p class="original">ì›ë¬¸: ' + testWords + '</p><p>Python API í˜¸ì¶œ ì¤‘...</p>';

            // ìºì‹œ ì´ˆê¸°í™”
            localStorage.removeItem('pronunciation_serendipity');
            localStorage.removeItem('pronunciation_magnificent');

            const start = Date.now();
            const pronunciation = await convertLineAsync(testWords);
            const time = Date.now() - start;

            result.innerHTML = `
                <p class="original">ì›ë¬¸: ${testWords}</p>
                <p class="pronunciation">ë°œìŒ: ${pronunciation}</p>
                <p class="info">ì†Œìš” ì‹œê°„: ${time}ms (Python API í™œìš©)</p>
                <p class="info">ğŸ’¡ Python ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í¬íŠ¸ 5001)</p>
            `;
        }

        async function testFullSentence() {
            const lyrics = `Tell me why it's so uncomfortable
When you're around me
I can feel your love
Breaking down the walls`;

            const result = document.getElementById('sentenceResult');
            result.innerHTML = '<p>ì „ì²´ ê°€ì‚¬ ë³€í™˜ ì¤‘... (5ë‹¨ê³„ í´ë°± ì‹œìŠ¤í…œ í™œìš©)</p>';

            const lines = lyrics.split('\n');
            let html = '';

            const startTotal = Date.now();

            for (const line of lines) {
                if (line.trim()) {
                    const start = Date.now();
                    const pronunciation = await convertLineAsync(line);
                    const time = Date.now() - start;

                    html += `
                        <div style="margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 8px;">
                            <p class="original">${line}</p>
                            <p class="pronunciation">${pronunciation}</p>
                            <p class="info">ì†Œìš” ì‹œê°„: ${time}ms</p>
                        </div>
                    `;
                }
            }

            const totalTime = Date.now() - startTotal;
            html = `<p style="color: #4CAF50; font-weight: 600;">ì´ ì†Œìš” ì‹œê°„: ${totalTime}ms</p>` + html;

            result.innerHTML = html;
        }

        async function testCache() {
            const testWord = "magnificent";
            const result = document.getElementById('cacheResult');

            // ìºì‹œ ì´ˆê¸°í™”
            localStorage.removeItem('pronunciation_magnificent');
            result.innerHTML = '<p>ìºì‹œ ì´ˆê¸°í™” ì™„ë£Œ</p><p>ì²« ë²ˆì§¸ ë³€í™˜ ì¤‘...</p>';

            // ì²« ë²ˆì§¸ ë³€í™˜ (Python API ë˜ëŠ” Dictionary API í˜¸ì¶œ)
            const start1 = Date.now();
            const pronunciation1 = await convertLineAsync(testWord);
            const time1 = Date.now() - start1;

            result.innerHTML += `<p class="pronunciation">ê²°ê³¼: ${pronunciation1}</p>`;
            result.innerHTML += `<p class="info">ì²« ë²ˆì§¸ ì†Œìš” ì‹œê°„: ${time1}ms</p>`;

            result.innerHTML += '<p>ë‘ ë²ˆì§¸ ë³€í™˜ ì¤‘ (ìºì‹œ ì‚¬ìš©)...</p>';

            // ë‘ ë²ˆì§¸ ë³€í™˜ (ìºì‹œì—ì„œ ì¡°íšŒ)
            const start2 = Date.now();
            const pronunciation2 = await convertLineAsync(testWord);
            const time2 = Date.now() - start2;

            result.innerHTML += `<p class="pronunciation">ê²°ê³¼: ${pronunciation2}</p>`;
            result.innerHTML += `<p class="info">ë‘ ë²ˆì§¸ ì†Œìš” ì‹œê°„: ${time2}ms</p>`;
            result.innerHTML += `<p style="color: #4CAF50; font-weight: 600;">âš¡ ìºì‹œ ì†ë„ í–¥ìƒ: ${(time1 / time2).toFixed(1)}ë°° ë¹ ë¦„</p>`;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ Python ì„œë²„ ìƒíƒœ í™•ì¸
        window.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('http://localhost:5001/health');
                if (response.ok) {
                    console.log('âœ… Python ë°œìŒ ë³€í™˜ ì„œë²„ ì—°ê²°ë¨');
                }
            } catch (e) {
                console.warn('âš ï¸ Python ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ ì•„ë‹™ë‹ˆë‹¤. 3ë‹¨ê³„ í´ë°±ì´ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        });
    </script>
</body>
</html>
